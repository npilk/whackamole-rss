<%- include('layout', {view: view, body: `
    <div class="mb-6">
        <div class="flex justify-between items-start mb-2">
            <h2 class="text-2xl font-bold text-gray-800">
                ${view === 'unread' ? 'Unread Links' : 'Archive'}
            </h2>
            ${view === 'unread' && articles.length > 0 ? `
                <button
                    onclick="markAllAsRead()"
                    class="px-4 py-2 bg-gray-600 text-white text-sm rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
                >
                    Mark All as Read
                </button>
            ` : ''}
        </div>
        <p class="text-gray-600">
            ${view === 'unread' ? 'Click a link to open in a new tab. It will be marked as read and removed from this list.' : 'A complete history of all links from your feeds (up to 500).'}
        </p>
    </div>

    <div class="space-y-4">
        ${articles.length === 0 ? `
            <div class="bg-white rounded-lg shadow p-6 text-center">
                <p class="text-gray-500">
                    ${view === 'unread' ? 'No unread links.' : 'No links found.'}
                </p>
                ${view === 'unread' ? '<p class="text-sm text-gray-400 mt-2">Add some feeds to get started.</p>' : ''}
            </div>
        ` : ''}

        ${articles.map(article => `
            <div class="article-item bg-white rounded-lg shadow hover:shadow-md transition-shadow">
                <div class="p-4">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <a href="${article.link}" 
                               target="_blank"
                               class="article-link block ${article.is_read && view === 'unread' ? 'read opacity-60' : ''}"
                               data-article-id="${article.id}">
                                <h3 class="text-lg font-semibold text-blue-700 hover:text-blue-800 leading-[1.3] mb-1">
                                    ${article.title}
                                </h3>
                            </a>
                            
                            ${article.description ? `
                                <p class="text-gray-600 text-sm mb-2 line-clamp-2">
                                    ${article.description.substring(0, 200)}${article.description.length > 200 ? '...' : ''}
                                </p>
                            ` : ''}
                            
                            <div class="flex items-center text-xs text-gray-500 space-x-4">
                                ${article.feed_homepage ? `
                                    <a href="${article.feed_homepage}"
                                       target="_blank"
                                       class="bg-blue-50 text-blue-800 px-3 py-1 rounded-full font-medium text-sm hover:bg-blue-100 transition-colors">
                                        ${article.feed_title}
                                    </a>
                                ` : `
                                    <span class="bg-blue-50 text-blue-800 px-3 py-1 rounded-full font-medium text-sm">
                                        ${article.feed_title}
                                    </span>
                                `}
                                ${article.pub_date ? `
                                    <span>
                                        ${new Date(article.pub_date).toLocaleDateString()}
                                    </span>
                                ` : ''}
                                ${article.is_read && view === 'archive' ? `
                                    <span class="text-green-600">âœ“ Read</span>
                                ` : ''}
                            </div>
                        </div>
                        
                        ${view === 'unread' ? `
                            <div class="ml-4 flex-shrink-0">
                                <button 
                                    onclick="markAsReadOnly(${article.id}, event)"
                                    class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors"
                                    title="Mark as read"
                                >
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            </div>
        `).join('')}
    </div>

    ${articles.length > 0 && view === 'archive' ? `
        <div class="mt-8 text-center">
            <p class="text-gray-500 text-sm">
                Showing latest 500 articles
            </p>
        </div>
    ` : ''}
`}) %>